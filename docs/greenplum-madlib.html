<!--
Copyright (C) 2019-Present Pivotal Software, Inc. All rights reserved.
This program and the accompanying materials are made available under the terms of the under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and
limitations under the License.
-->

<!DOCTYPE html>
<html class="sl-root decks export offline loaded">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Greenplum - MADlib</title>

    <meta name="description" content="Introduction to the Apache MADlib">

    <link rel="stylesheet" type="text/css" href="lib/offline-v2.css">
    <link href="lib/gp-workshop.css" rel="stylesheet" type="text/css"/>
    <link href="lib/gp-workshop-grid.css" rel="stylesheet" type="text/css"/>

</head>
<body class="reveal-viewport theme-font-montserrat theme-color-white-blue">
<div class="reveal">
    <div class="slides">
        <section class="title-slide" data-id="title-slide">
            <div class="grid-page">
                <div class="full-page" id="title-slide">
                    <div><h1>Petabyte Scale Data Warehousing with Greenplum</h1></div>
                    <h2 class="subtitle">Apache MADlib</h2>
                </div>
            </div>
        </section>
        <section class="agenda-slide" data-id="gp-madlib-slide-2">
            <div class="grid-page">
                <div class="header">
                    <div></div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="content-first-third">
                    <h1>Agenda</h1>
                </div>
                <div class="content-two-third">
                    <ul>
                        <li>Why MADlib?</li>
                        <li>What is MADlib?</li>
                        <li>Current MADlib routines</li>
                        <li>Examples</li>
                    </ul>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-3" id="gp-madlib-slide-3">
            <div class="grid-page">
                <div class="header">
                    <div>
                        <h2>Why MADlib?</h2>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="full-page">
                    <ul style="font-size: 1.3em; margin-top: 40px;">
                        <li>Most analytics is done by pulling the data to the analytic engine
                            <ul>
                                <li style="font-size: 0.9em; ">Some engines only accommodate in memory data</li>
                                <li style="font-size: 0.9em; ">Sample data is the fall back - often not satisfactory</li>
                            </ul>
                        </li>
                        <li>Developers sometimes write their own code</li>
                        <li>There is a better way</li>
                    </ul>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-4" id="gp-madlib-slide-4">
            <div class="grid-page">
                <div class="header">
                    <div class="side-by-side">
                        <h2>Scalable, In-database Machine Learning</h2>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="full-page">
                    <img style="width: 110%; margin-top: 60px; " alt="madlib-info" src="images/madlib-info.png">
                    <div style="text-align: left; border: 1px solid red; margin-top: 20px;">
                        <p style="text-align:center; font-weight: bold">Apache MADlib : Magnetic - Agile - Deep library</p>
                        <ul>
                            <li>Open source: <a href="https://github.com/apache/madlib" target="_blank">https://github.com/apache/madlib</a>
                            </li>
                            <li>Downloads and Docs: <a href="http://madlib.apache.org" target="_blank">http://madlib.apache.org/</a>
                            </li>
                            <li>Wiki: <a href="https://cwiki.apache.org/confluence/display/MADLIB/" target="_blank">https://cwiki.apache.org/confluence/display/MADLIB/</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-5" id="gp-madlib-slide-5">
            <div class="grid-page">
                <div class="header">
                    <div class="side-by-side">
                        <h2>Advantages</h2>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>

                <div class="sl-block" data-block-type="image"
                     style="width: 125px; height: 92px; left: 0px; top: 0px; min-width: 4px; min-height: 4px;"
                     data-block-id="7a029bb459070087b67fe54b8bf35eee">
                    <div class="sl-block-content" style="z-index: 12;">
                    </div>
                </div>
                <div class="full-page">
                    <ul>
                        <li>Better parallelism
                            <ul>
                                <li>Algorithms designed to leverage MPP and Hadoop architecture</li>
                            </ul>
                        </li>
                        <li>Better scalability
                            <ul>
                                <li>Algorithms scale as your data scales</li>
                            </ul>
                        </li>
                        <li>Better predictive accuracy
                            <ul>
                                <li>Can use all data, not a sample</li>
                            </ul>
                        </li>
                        <li>Open source
                            <ul>
                                <li>Available for customization and optimization by the user if desired</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-6" id="gp-madlib-slide-6">
            <div class="grid-page">
                <div class="header">
                    <div class="side-by-side">
                        <h2>SVM Scale with Data Size</h2>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="full-page">
                    <img style="height: 80%" alt="madlib-performance-graph" src="images/madlib-performance.png">
                    <div style="border: 1px solid black; padding: 0px 20px; font-size: 0.7em;">
                        <ul>
                            <li class="nobullet" style="margin-left:-40px; ">Greenplum cluster:</li>
                            <li style="">1 master</li>
                            <li style="">4 segment hosts with 6 segments per host</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-7" id="gp-madlib-slide-7">
            <div class="grid-page">
                <div class="header">
                    <div><h2>Functions</h2></div>
                    <div><img style="width: 60%;" alt="madlib-functions" src="images/madlib-functions.png"></div>
                </div>
                <div class="content-first-third" style="justify-content: space-between;">
                    <p class="madlib-function-list">
                        <b>Supervised Learning</b><br>
                        Neural Networks<br>
                        Support Vector Machines (SVM)<br>
                        Conditional Random Field (CRF)<br>
                        Regression Models:<br>
                        - Clustered Variance<br>
                        - Cox-Proportional Hazards Regression<br>
                        - Elastic Net Regularization<br>
                        - Generalized Linear Models<br>
                        - Linear Regression<br>
                        - Logistic Regression<br>
                        - Marginal Effects<br>
                        - Multinomial Regression<br>
                        - Naïve Bayes<br>
                        - Ordinal Regression<br>
                        - Robust Variance<br>
                        Tree Methods<br>
                        - Decision Tree<br>
                        - Random Forest
                    </p>
                    <p class="madlib-function-list">
                        <b>Unsupervised Learning</b><br>
                        Association Rules (Apriori)<br>
                        Clustering (k-Means)<br>
                        Principal Component Analysis (PCA)<br>
                        Topic Modelling (Latent Dirichlet Allocation)
                    </p>
                </div>
                <div class="content-second-third" style="justify-content: space-between;">
                    <p class="madlib-function-list">
                        <b>Graph</b><br>
                        All Pairs Shortest Path (APSP)<br>
                        Breadth-First Search<br>
                        Hyperlink-Induced Topic Search (HITS)<br>
                        Average Path Length<br>
                        Closeness Centrality<br>
                        Graph Diameter<br>
                        In-Out Degree<br>
                        PageRank and Personalized PageRank<br>
                        Single Source Shortest Path (SSSP)<br>
                        Weakly Connected Components
                    </p>
                    <p class="madlib-function-list">
                        <b>Utility Functions</b>
                        Columns to Vector<br>
                        Conjugate Gradient<br>
                        Linear Solvers<br>
                        Dense Linear Systems<br>
                        Sparse Linear Systems<br>
                        Mini-Batching<br>
                        PMML Export<br>
                        Term Frequency for Text<br>
                        Vector to Columns
                    </p>
                    <p class="madlib-function-list">
                        <b>Model Selection</b><br>
                        Cross Validation<br>
                        Prediction Metrics<br>
                        Train-Test Split
                    </p>
                </div>
                <div class="content-third-third" style="justify-content: space-between;">
                    <p class="madlib-function-list">
                        <b>Data Types and Transformations</b><br>
                        Array and Matrix Operations<br>
                        Matrix Factorization<br>
                        - Low Rank<br>
                        - Singular Value Decomposition (SVD)<br>
                        Norms and Distance Functions<br>
                        Sparse Vectors<br>
                        Encoding Categorical Variables<br>
                        Path Functions<br>
                        Pivot<br>
                        Sessionize<br>
                        Stemming
                    </p>
                    <p class="madlib-function-list">
                        <b>Statistics</b><br>
                        Descriptive Statistics<br>
                        - Cardinality Estimations<br>
                        - Correlation and Covariance<br>
                        - Summary<br>
                        Inferential Statistics<br>
                        - Hypothesis Tests<br>
                        Probability Functions
                    </p>
                    <p class="madlib-function-list">
                        <b>Sampling</b>
                        Balanced, Random, Stratified</p>
                    <p class="madlib-function-list">
                        <b>ARIMA</b> - Time Series Analysis
                    </p>
                    <p class="madlib-function-list">
                        <b>K-Nearest Neighbors</b>
                    </p>
                </div>
                <div class="footer">
                    <span style="font-size:0.7em"><em>Apache MADlib 1.15.1</em></span>
                </div>
            </div>
            <div class="sl-block" data-block-type="text" data-block-id="88457bf012187c834c7b2487b4d5c66b"
                 style="height: auto; min-width: 30px; min-height: 30px; width: 780px; left: 85px; top: 265px;">
                <div class="sl-block-content fragment" data-placeholder-tag="p" data-placeholder-text="Text"
                     style="z-index: 26; border: 1px solid var(--pivotal-green); color: var(--pivotal-green); background-color: white;
                     font-size: 175%; padding: 30px;"
                     data-fragment-index="0">
                    <p>Comprehensive and Mature</p>

                    <p>data science library</p>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-8" id="gp-madlib-slide-8">
            <div class="grid-page">
                <div class="header">
                    <div>
                        <h2>Architecture</h2>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="full-page" style="align-items: flex-start; margin-left: 3em;">
                    <div class="side-by-side">
                        <p style="width: 22em; margin-right: 1em; background-color: var(--pres-purple); color: white">
                            User Interface
                        </p>
                        <p style="color: var(--pres-purple)">SQL</p>
                    </div>
                    <div class="side-by-side">
                        <p style="width: 22em; margin-right: 1em; background-color: var(--pivotal-green); color: white">
                            High-level Abstraction Layer<br>
                            (iteration controller, ...)</p>
                        <p style="color: var(--pivotal-green)">Python</p>
                    </div>
                    <div class="side-by-side">
                        <div style="justify-content: center">
                            <p style="width: 6em; height: 9.6em; margin-right: 0.5em; padding-top: 2.5em; background-color: #aaa; ">
                                RDBMS<br>
                                Built-in<br>
                                Functions<br>
                                (C++)
                            </p>
                        </div>
                        <div>
                            <div>
                                <p style="width: 15.5em; margin-right: 0px; padding: 0.4em 0em; background-color: var(--pres-blue); color: white">
                                    Functions for Inner Loops<br>
                                    (implements convex optimization)
                                </p>
                            </div>
                            <div>
                                <p style="width: 15.5em; padding: 0.4em 0em; background-color: var(--pres-blue); color: white">
                                    Low-level Abstration Layer<br>
                                    (matrix operations,<br>
                                    C++ to DB type bridge, ...)
                                </p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <p style="width: 22em; background-color: #aaa; ">
                            RDBMS Query Processing<br>
                            (Greenplum, PostgreSQL)
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section data-id="gp-madlib-slide-9" id="gp-madlib-slide-9">
            <div class="grid-page">
                <div class="header">
                    <div>
                        <h2>Calling MADlib Functions</h2>
                        <h3>Fast Training and Scoring</h3>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="full-page">
                    <div>
                        <ul style="font-size: 0.9em">
                            <li>MADlib allows users to easily create models without moving data out of the database
                                <ul>
                                    <li>Model generation</li>
                                    <li>Model validation</li>
                                    <li>Scoring (evaluation of) new data</li>
                                </ul>
                            </li>
                            <li>All the data is available</li>
                            <li>Built-in functionality to create multiple smaller models (e.g. classification grouped by feature)</li>
                            <li>Open-source lets you tweak and extend methods or build your own</li>
                        </ul>
                    </div>
                    <div class="side-by-side boxshadow" style="margin-top: 1em;">
                        <div class="sl-block-content notranslate"
                             data-highlight-theme="solarized-light" data-code-frame="none"
                             style="align-self: start; font-size: 0.8em; margin-right: 1em">
                        <pre><code>SELECT madlib.linregr_train(
                     'houses',
              'house_linregr',
                      'price',
  'ARRAY[1, tax, bath, size]');</code></pre>
                        </div>
                        <div>
                            <p style="font-size:0.7em; text-align: start; line-height: 1.5em; padding-right: 1em">
                                MADlib model function<br>
                                Table containing training data<br>
                                Table in which to save results<br>
                                Column containing dependent variable<br>
                                Features included in the model
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-10" id="gp-madlib-slide-10">
            <div class="grid-page">
                <div class="header">
                    <div>
                        <h2>Calling MADlib Functions</h2>
                        <h3>Creating multiple output models</h3>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="full-page">

                    <div class="side-by-side boxshadow" style="margin-top: 1em;">
                        <div class="sl-block-content notranslate"
                             data-highlight-theme="solarized-light" data-code-frame="none"
                             style="align-self: start; font-size: 0.8em; margin-right: 1em">
                        <pre><code>SELECT madlib.linregr_train(
                     'houses',
              'house_linregr',
                      'price',
  'ARRAY[1, tax, bath, size]',
                      'style');</code></pre>
                        </div>
                        <div>
                            <p style="font-size:0.7em; text-align: start; line-height: 1.5em; padding-right: 1em">
                                MADlib model function<br>
                                Table containing training data<br>
                                Table in which to save results<br>
                                Column containing dependent variable<br>
                                Features included in the model<br>
                                Create multiple output models (one for each value of house style)
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section data-id="gp-madlib-slide-11" id="gp-madlib-slide-11">
            <div class="grid-page">
                <div class="header">
                    <div>
                        <h2>Calling MADlib Functions</h2>
                        <h3>Testing your model</h3>
                    </div>
                    <div class="logo-image"><img alt="" src=""></div>
                </div>
                <div class="content-top-half" style="justify-content: flex-start">
                    <div class="sl-block-content notranslate fragment semi-fade-out"
                         data-highlight-theme="solarized-light" data-code-frame="none"
                         style="z-index: 14; border-width: 1px; font-size: 90%;" data-fragment-index="0">
                     <pre><code>SELECT madlib.linregr_train(
                        'houses',
                 'house_linregr',
                         'price',
       'ARRAY[1, tax, bath, hsize]'
);</code></pre>
                    </div>
                </div>
                <div class="content-bottom-half">
                    <div class="side-by-side ">
                        <div class="sl-block-content notranslate" data-highlight-theme="monokai" data-code-frame="none"
                             style="z-index: 10; font-size: 0.7em; margin-right: 0.5em">
                             <pre><code style="padding: 0.5em;">SELECT houses.*,

   madlib.linregr_predict(ARRAY[1,tax,bath,hsize],
                          m.coef) as predict


FROM houses,
     houses_linregr m;</code></pre>
                        </div>
                        <div>
                            <p style="font-size:0.7em; text-align: start; line-height: 1.5em; padding-right: 0.3em">
                                <br><br>MADlib model scoring function<br><br>
                                Table with data to be scored<br>
                                Table containing model
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section data-background-color=var(--pivotal-green)
                 class="last-slide" data-menu-title="End">
            <div class="grid-page">
                <div class="full-page">
                    <img alt="Greenplum Database" src="images/logos/logo-gp-horizontal-ondark.png">
                </div>
            </div>
        </section>
    </div>
</div>

<script>
    var SLConfig = {
        "deck": {
            "id": 1664739,
            "slug": "greenplum-madlib",
            "title": "Apache MADlib",
            "description": "Introduction to Apache MADlib",
            "width": 960,
            "height": 720,
            "visibility": "all",
            "published_at": "2019-12-03T21:56:26.389Z",
            "sanitize_messages": null,
            "thumbnail_url": "https://s3.amazonaws.com/media-p.slid.es/thumbnails/033f1b68d1a1688ef97b95c21a297ed8/thumb.jpg?1575485916",
            "view_count": 1,
            "user": {
                "id": 1134143,
                "username": "csylvester",
                "name": "Craig Sylvester",
                "description": "Pivotal Data Engineer - Federal Division",
                "thumbnail_url": "https://www.gravatar.com/avatar/d2436491e8c9292c895eebad673e3837?s=140\u0026d=https%3A%2F%2Fstatic.slid.es%2Fimages%2Fdefault-profile-picture.png",
                "paid": true,
                "pro": true,
                "lite": false,
                "team_id": null,
                "settings": {
                    "id": 3868303,
                    "present_controls": true,
                    "present_upsizing": true,
                    "present_pointer": false,
                    "present_notes": true,
                    "default_deck_tag_id": null
                }
            },
            "background_transition": "slide",
            "transition": "slide",
            "theme_id": null,
            "theme_font": "montserrat",
            "theme_color": "white-blue",
            "auto_slide_interval": 0,
            "comments_enabled": true,
            "forking_enabled": true,
            "rolling_links": false,
            "center": false,
            "shuffle": false,
            "should_loop": false,
            "share_notes": false,
            "slide_number": false,
            "slide_count": 12,
            "rtl": false,
            "version": 2,
            "collaborative": false,
            "deck_user_editor_limit": 3,
            "data_updated_at": 1575485916104,
            "font_typekit": null,
            "font_google": null,
            "time_limit": null,
            "upsizing_enabled": true,
            "notes": {
                "gp-madlib-slide-4": "MADlib is an open source, SQL-based machine learning library.  It is a top level project at the Apache Software Foundation.\n\nRuns in-database on Greenplum and PostgreSQL.\n- MADlib brings machine learning into the database.  \n- You don’t need to move data out of the database, run machine learning in a separate execution engine, then move the results back into the database.\n\nMain advantage of MADlib on Greenplum is machine learning on large data sets.  This means a focus on:\n- Scalability\n- Performance",
                "gp-madlib-slide-5": "",
                "gp-madlib-slide-6": "Scaling by data size (this chart)\n- Here is an example of scalability results, showing linear scalability with number of rows in the table.\n- Support vector machines is a classic algorithm used for classification, regression, and novelty detection.\n- Key thing is that this is a straight line - as your data set grows, run-time grows in a predictable manner (not going to blow up).\n\nScaling by cluster size\n- Generally will be linear for most algorithms (i.e., if cluster 2x bigger, run-time will be 2x faster)",
                "gp-madlib-slide-7": "There are more than 50 machine learning, graph, math and statistical functions in MADlib.\n\nAnd you may recognize many of the most popular ones here such as logistic regression, decision trees, neural networks, k-means clustering, etc.\n\nIt is a comprehensive and mature data science library that can be used to solve a whole variety of real world use cases.",
                "gp-madlib-slide-8": "",
                "gp-madlib-slide-9": "Let’s take a look at linear regression, a common and useful predictive tool.\n\nThe first thing to notice is that you don’t write any code to do this, just  read the documentation to learn the calling sequence and arrange the data.  \n\nIn doing this kind of analysis, we first train the model on a sample of the data and then test the model by applying it to the rest of the data in what is called scoring the data.  \n\nIn linear regression , the variable we are trying to predict is called the dependent variable and the variables we use to predict it are the independent variable.  They must be FLOAT8 data types.  If they’re not, you can cast them to FLOAT8.",
                "gp-madlib-slide-10": "What happens if you have a categorical variable like color , that’s non numeric.  You can create different models for each category.\nHere we will create a different model depending on the style of the house.   ",
                "gp-madlib-slide-11": "Once you have generated the model, you then can test your model by scoring the remaining data.\nOnce you have validated the model, when new data arrives, you can score or predict the house price predicated upon the independent variables."
            }
        }
    };


    // Use local fonts
    SLConfig.fonts_url = 'lib/fonts/';
</script>

<script src="lib/reveal.min.js"></script>
<script src="lib/offline.js"></script>

<!-- Initialize the presentation -->
<script>
    Reveal.initialize({
        width: 960,
        height: 720,
        margin: 0.05,


        hash: true,
        controls: true,
        progress: true,
        mouseWheel: false,
        showNotes: false,
        slideNumber: false,

        autoSlide: 0,
        autoSlideStoppable: true,

        center: false,
        shuffle: false,
        loop: false,
        rtl: false,

        transition: "slide",
        backgroundTransition: "slide",

        highlight: {
            escapeHTML: false
        },
        /* Added menu plugin from https://github.com/denehyg/reveal.js-menu: CJS, 11oct2019 */
        /* For a description of the 'menu' options, see the gp-intro-overview.html presentation */
        menu: {
            side: 'left',
            width: 'wide',
            numbers: true,
            titleSelector: 'h1, h2, h3, h4, h5, h6',
            useTextContentForMissingTitles: false,
            hideMissingTitles: false,
            markers: true,
            custom: false,
            themes: false,
            themesPath: 'css/theme/',
            transitions: false,
            openButton: true,
            openSlideNumber: false,
            keyboard: true,
            sticky: false,
            autoOpen: true,
            delayInit: false,
            openOnInit: false,
            loadIcons: true
        },
        dependencies: [
            {
                src: 'lib/reveal-plugins/markdown/marked.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                }
            },
            {
                src: 'lib/reveal-plugins/markdown/markdown.js', condition: function () {
                    return !!document.querySelector('[data-markdown]');
                }
            },
            {src: 'lib/reveal-plugins/highlight/highlight.js'},
            {
                src: 'lib/reveal-plugins/notes/notes.js', async: true, condition: function () {
                    return !!document.body.classList;
                }
            },
            {src: 'lib/reveal-plugins/zoom/zoom.js', async: true},
            {src: 'lib/reveal-plugins/menu/menu.js', async: false}
        ]
    });
</script>


</body>
</html>
